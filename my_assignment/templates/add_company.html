<!DOCTYPE html>
{% extends 'base.html' %}

{% block user_name %}
<b>{{ user.name }}</b>
{% endblock %}

{% block content %}
<form method="POST" onsubmit="return validateAddCompanyForm()">
<h1 class="mt-4" style="margin-bottom: 20px;">New Company</h1>

<div class="card mb-4">
    <div class="card-header">
        <i class="fa fa-plus-circle" style="margin-right: 10px;"></i>
    </div>
    <div class="container">
        <div class="container-fluid" style="margin-top: 30px;">

                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label for="name">Company Name</label>
                    <input type="text" class="form-control" name="name" id="companyName">
                    <span id="companyName-error" class="error-message"></span>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="email">Email</label>
                    <input type="text" class="form-control" name="email" id="companyEmail" placeholder="name@example.com">
                    <span id="companyEmail-error" class="error-message"></span>
                  </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="sector">Sector</label>
                        <select name="sector" class="form-control" id="sectorType">
                          
                          <option selected>Choose...</option>
                          <option value="Agriculture">Agriculture</option>
                          <option value="Construction">Construction</option>
                          <option value="Education">Education</option>
                          <option value="Engineering">Engineering</option>
                          <option value="Food Processing">Food Processing</option>
                          <option value="Healthcare">Healthcare</option>
                          <option value="Information Technology (IT)">Information Technology (IT)</option>
                          <option value="Manufacturing">Manufacturing</option>
                          <option value="Oil and Gas">Oil and Gas</option>
                          <option value="Transportation">Transportation</option>
                          <option value="Other">Other</option>
                        </select>
                        <span id="sectorType-error" class="error-message"></span>
                      </div>
                    <div class="form-group col-md-6">
                      <label for="c_person">Contact Person Name</label>
                      <input type="text" class="form-control" name="c_person" id="contactPerson">
                      <span id="contactPerson-error" class="error-message"></span>
                    </div>
                  </div>
                <div class="form-group">
                  <label for="address">Address</label>
                  <input type="text" class="form-control" name="address" id="companyAddress">
                  <span id="address-error" class="error-message"></span>
                </div>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label for="postalcode">Postal Code</label>
                    <input type="text" class="form-control" name="postalcode" id="companyPostalcode" placeholder="e.g., 10211">
                    <span id="postalCode-error" class="error-message"></span>
                  </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-2">
                        <button type="submit" class="btn btn-primary btn-lg">submit</button>
                    </div>
                </div>
                
             
        </div>

    </div>
</div>
</form>

<script>
  function validateAddCompanyForm() {
      const companyName = document.getElementById("companyName").value;
      const companyemail = document.getElementById("companyEmail").value;
      const sectorType = document.getElementById("sectorType").value;
      const contactPerson = document.getElementById("contactPerson").value;
      const address = document.getElementById("companyAddress").value;
      const postalcode = document.getElementById("companyPostalcode").value;
  
      const companyNameError = document.getElementById("companyName-error");
      const companyEmailError = document.getElementById("companyEmail-error");
      const sectorTypeError = document.getElementById("sectorType-error");
      const contactPersonError = document.getElementById("contactPerson-error");
      const addressError = document.getElementById("address-error");
      const postalCodeError = document.getElementById("postalCode-error");
  
      companyNameError.textContent = "";
      companyEmailError.textContent = "";
      sectorTypeError.textContent = "";
      contactPersonError.textContent = "";
      addressError.textContent = "";
      postalCodeError.textContent = "";
  
      let isValid = true;
  
      if (companyName === "") {
          companyNameError.textContent = "Please enter a company name.";
          isValid = false;
      }
  
      if (companyemail === "" || !companyemail.includes("@")) {
          companyEmailError.textContent = "Please enter a valid email address.";
          isValid = false;
      }
  
      if (sectorType === "Choose..." || sectorType === "") {
          sectorTypeError.textContent = "Please select a company sector.";
          isValid = false;
      }
  
      if (contactPerson === "") {
          contactPersonError.textContent = "Please enter a contact person name.";
          isValid = false;
      }
  
      if (address === "") {
          addressError.textContent = "Please enter a company address.";
          isValid = false;
      }
  
      if (postalcode === "" || isNaN(postalcode) || !/^\d{5}$/.test(postalcode)) {
          postalCodeError.textContent = "Please enter a valid postal code.";
          isValid = false;
      }
  
      return isValid;
  }
  </script>
{% endblock %}
